From: Dovecot Maintainers <jaldhar-dovecot@debian.org>
Date: Wed, 27 Oct 2010 10:01:28 +0200
Subject: [PATCH] exec-check-for-none

Description: Start dovecot even if protocols is none
Origin: vendor
---
 src/master/master-settings.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/src/master/master-settings.c b/src/master/master-settings.c
index 2ab2199..3d818bf 100644
--- a/src/master/master-settings.c
+++ b/src/master/master-settings.c
@@ -851,6 +851,7 @@ static bool settings_verify(struct settings *set)
 	}
 
 	if (set->protocol != MAIL_PROTOCOL_ANY &&
+	    strcmp(set->protocols, "none") &&
 	    access(t_strcut(set->mail_executable, ' '), X_OK) < 0) {
 		i_error("mail_executable: Can't use %s: %m",
 			t_strcut(set->mail_executable, ' '));
@@ -949,6 +950,7 @@ static bool settings_verify(struct settings *set)
 	}
 
 	if (set->protocol != MAIL_PROTOCOL_ANY &&
+	    strcmp(set->protocols, "none") &&
 	    access(t_strcut(set->login_executable, ' '), X_OK) < 0) {
 		i_error("login_executable: Can't use %s: %m",
 			t_strcut(set->login_executable, ' '));
-- 
